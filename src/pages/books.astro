---
// Books page with beige background
import PageLayout from '../layouts/PageLayout.astro';
import { getAllBooks } from '../lib/datocms';
import { Image } from 'astro:assets';

const books = await getAllBooks();

// Bauhaus 1919 color palette for book cards
const colors = ['#D85D4A', '#5A8FA8', '#E8A84A', '#1A1A1A', '#E2D5C3', '#E89C4A'];
---

<PageLayout title="Books" bgColor="var(--color-books)" textColor="black" transitionName="books-box" whiteBgOnMobile={true}>
  <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
    {books.map((book, index) => (
      <a href={`/books/${book.slug}`} class="block group">
        <article class="border-4 border-black p-6 h-full transition-transform hover:scale-[1.02]" style={`background-color: ${colors[index % colors.length]}`}>
          {book.cover && (
            <Image
              src={book.cover.url}
              alt={book.cover.alt || book.title}
              width={800}
              height={400}
              class="w-full h-48 object-cover border-4 border-black mb-4"
            />
          )}
          <h2 class="text-3xl font-black mb-4 text-white group-hover:opacity-80 transition-opacity" transition:name={`book-title-${book.slug}`}>
            {book.title}
          </h2>
          <p class="text-lg text-white/90">{book.brief}</p>
        </article>
      </a>
    ))}
  </div>

  {books.length === 0 && (
    <div class="bg-white border-4 border-black p-8 text-center">
      <p class="text-xl">No books available yet.</p>
    </div>
  )}
</PageLayout>
