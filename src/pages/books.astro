---
// Books page with beige background
import PageLayout from '../layouts/PageLayout.astro';
import { getAllBooks } from '../lib/datocms';
import { Image } from 'astro:assets';

const books = await getAllBooks();

// Bauhaus color palette for book cards
const colors = ['#e74c3c', '#1a9aad', '#f39c12', '#2c3e50', '#27ae60', '#8e44ad'];
---

<PageLayout title="Books" bgColor="#e8ded0" textColor="black" transitionName="books-box">
  <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
    {books.map((book, index) => (
      <a href={`/books/${book.slug}`} class="block group">
        <article class="border-4 border-black p-6 h-full transition-transform hover:scale-[1.02]" style={`background-color: ${colors[index % colors.length]}`}>
          {book.cover && (
            <Image
              src={book.cover.url}
              alt={book.cover.alt || book.title}
              width={800}
              height={400}
              class="w-full h-48 object-cover border-4 border-black mb-4"
            />
          )}
          <h2 class="text-3xl font-black mb-4 text-white group-hover:opacity-80 transition-opacity" transition:name={`book-title-${book.slug}`}>
            {book.title}
          </h2>
          <p class="text-lg text-white/90">{book.brief}</p>
        </article>
      </a>
    ))}
  </div>

  {books.length === 0 && (
    <div class="bg-white border-4 border-black p-8 text-center">
      <p class="text-xl">No books available yet.</p>
    </div>
  )}
</PageLayout>
